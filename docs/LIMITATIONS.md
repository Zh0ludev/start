# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–∏—Å–∫–∏ —Å–∏—Å—Ç–µ–º—ã

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP

### –ß—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ù–ï —É–º–µ–µ—Ç

#### –§–æ—Ä–º–∞—Ç—ã –∑–∞—è–≤–æ–∫
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ PDF-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚ùå OCR –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏ —Å–∫–∞–Ω–æ–≤
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ (—Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏)
- ‚úÖ **–¢–æ–ª—å–∫–æ**: —Ç–µ–∫—Å—Ç–æ–≤—ã–µ email

#### –†–∞—Å—Å—ã–ª–∫–∞
- ‚ùå –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞–º (email-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥)
- ‚ùå SMS/WhatsApp —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –≤ 1–° (MVP)
- ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Bitrix24 (MVP)
- ‚ùå API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚ùå –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–∫–∞–∫–æ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ –ª—É—á—à–µ)
- ‚ùå –°–ª–æ–∂–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

#### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –ù–µ –≥–æ—Ç–æ–≤–∞ –∫ > 50 –∑–∞—è–≤–∫–∞–º/–¥–µ–Ω—å (–±–µ–∑ –¥–æ—Ä–∞–±–æ—Ç–æ–∫)
- ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π (–µ—Å–ª–∏ AI API —É–ø–∞–ª)
- ‚ùå –û–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω (–Ω–µ—Ç –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### 1. OpenAI API
**–†–∏—Å–∫**: Rate limits, downtime, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –õ–∏–º–∏—Ç | –†–∏—Å–∫ |
|----------|-------|------|
| –ó–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω | 60 (tier 1) | –ü—Ä–∏ 20 –∑–∞—è–≤–∫–∞—Ö/–¥–µ–Ω—å - OK |
| –¢–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å | 200k | –ü–∞—Ä—Å–∏–Ω–≥ 20 –∑–∞—è–≤–æ–∫ ~50k —Ç–æ–∫–µ–Ω–æ–≤ - OK |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | $0.15/1M —Ç–æ–∫–µ–Ω–æ–≤ | –†–æ—Å—Ç —Ü–µ–Ω ‚Üí —Ä–æ—Å—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ |

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç–∏–ø–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã)
- Fallback –Ω–∞ —Ä—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–æ–≤ (alert > 10k‚ÇΩ)

#### 2. Mail.ru SMTP/IMAP
**–†–∏—Å–∫**: –õ–∏–º–∏—Ç—ã –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞ —Å–ø–∞–º

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –õ–∏–º–∏—Ç | –ù–∞—à –æ–±—ä–µ–º |
|----------|-------|-----------|
| SMTP –ø–∏—Å–µ–º/–¥–µ–Ω—å | ~100 | 20 –∑–∞—è–≤–æ–∫ √ó 5 –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ = 100 –ø–∏—Å–µ–º |
| IMAP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π | ~10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö | Polling –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫ = 1 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ |

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ü—Ä–∏ —Ä–æ—Å—Ç–µ –¥–æ 30 –∑–∞—è–≤–æ–∫/–¥–µ–Ω—å - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞ "–º–∞—Å—Å–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É"
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ (–¥–æ 5 –º–∏–Ω—É—Ç)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SendGrid –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ (—Ä–µ–∑–µ—Ä–≤)
- Throttling - –Ω–µ –±–æ–ª–µ–µ 50 –ø–∏—Å–µ–º/—á–∞—Å
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ bounce rate

#### 3. Mail.ru IMAP Polling
**–†–∏—Å–∫**: –ü—Ä–æ–ø—É—Å–∫ –ø–∏—Å–µ–º, –º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ

Polling –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–æ 30 —Å–µ–∫
- –ü—Ä–∏ —Å–±–æ–µ - –ø—Ä–æ–ø—É—Å–∫ –ø–∏—Å–µ–º
- –ù–µ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- Retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏)
- –†—É—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á—Ç—É" –≤ –±–æ—Ç–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: AI –Ω–µ —Å–º–æ–≥ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∑–∞—è–≤–∫—É
```python
try:
    parsed = ai_parser.parse_order(email.body)
except ParsingError:
    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
    bot.send_message(
        "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∑–∞—è–≤–∫—É\n"
        "–û—Ç: {email.from}\n"
        "[–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é]"
    )
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–∏—Å—å–º–æ
    save_unparsed_email(email)
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 48 —á–∞—Å–æ–≤
if request.sent_at + timedelta(hours=48) < now():
    request.status = 'timeout'

    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    bot.send_message(
        f"‚è± –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç {supplier.name}\n"
        "–ó–∞—è–≤–∫–∞: {order.number}\n"
        "[–ù–∞–ø–æ–º–Ω–∏—Ç—å] [–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–≥–æ]"
    )
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
```python
# Graceful degradation
try:
    db.session.commit()
except DatabaseError:
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis (–≤—Ä–µ–º–µ–Ω–Ω–æ)
    redis.lpush('pending_orders', order.to_json())

    # Alert –≤ Telegram
    bot.send_message("üö® –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞! –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–µ—à")

    # Retry —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç
    celery.retry(countdown=300)
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: Railway/Render downtime
```python
# Health check endpoint
@app.get("/health")
def health():
    checks = {
        "database": check_db(),
        "redis": check_redis(),
        "email": check_email_connection()
    }

    if not all(checks.values()):
        raise HTTPException(503, detail=checks)

    return {"status": "ok", "checks": checks}

# UptimeRobot –ø–∏–Ω–≥—É–µ—Ç /health –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
# –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Üí alert –≤ Telegram
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏—Å—Ç–µ–º–∞ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:
- –§–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (+7, 8, –±–µ–∑ –∫–æ–¥–∞)
- –§–æ—Ä–º–∞—Ç email (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π)
- –ò–ù–ù (–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞)

**–ü–æ—á–µ–º—É**: –°–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è MVP

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: v2.0 - –¥–æ–±–∞–≤–∏—Ç—å Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã

### 2. –ù–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –∑–∞—è–≤–æ–∫
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥—É–±–ª—å email ‚Üí 2 –∑–∞—è–≤–∫–∏

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ subject + client email (–±—É–¥—É—â–µ–µ)

### 3. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø 2 —á–µ–ª–æ–≤–µ–∫
**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ 2 –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∑–∞—è–≤–∫–æ–π - –∫–æ–Ω—Ñ–ª–∏–∫—Ç

**–†–µ—à–µ–Ω–∏–µ**: Optimistic locking (version field –≤ –ë–î) - –≤ roadmap

### 4. –ù–µ—Ç offline —Ä–µ–∂–∏–º–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**: PWA —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º (v3.0)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

### –ù–∞ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ù–µ—Ç —Ç–µ—Å—Ç–æ–≤** - —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ–º –¥–æ MVP
   - –ü–ª–∞–Ω: –î–æ–±–∞–≤–∏—Ç—å pytest –≤ –Ω–µ–¥–µ–ª—é 4

2. **–ù–µ—Ç Docker** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ
   - –ü–ª–∞–Ω: Docker-compose –ø–æ—Å–ª–µ MVP

3. **–ù–µ—Ç CI/CD** - –¥–µ–ø–ª–æ–π –≤—Ä—É—á–Ω—É—é
   - –ü–ª–∞–Ω: GitHub Actions –ø–æ—Å–ª–µ MVP

4. **–ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - —Ç–æ–ª—å–∫–æ Railway Dashboard
   - –ü–ª–∞–Ω: Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ (v1.1)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Monolith** - –≤—Å–µ –≤ –æ–¥–Ω–æ–º FastAPI –ø—Ä–æ—Ü–µ—Å—Å–µ
   - –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å
   - –†–µ—à–µ–Ω–∏–µ: –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (v3.0)

2. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π email polling**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ
   - –†–µ—à–µ–Ω–∏–µ: Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (v2.0)

3. **–ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
   - –†–µ—à–µ–Ω–∏–µ: Redis cache (v1.1)

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –µ—Å–ª–∏...

| –°–µ—Ä–≤–∏—Å | Downtime | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|--------|----------|-------------|-----------|
| **OpenAI API** | –£–ø–∞–ª | –ù–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –∑–∞—è–≤–æ–∫ | –†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ + fallback –∫ –ø—Ä–æ—Å—Ç—ã–º regex |
| **Mail.ru SMTP** | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω | –ù–µ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ SendGrid (—Ä—É—á–Ω–æ–µ) |
| **Railway** | –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –°–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –†–µ–∑–µ—Ä–≤–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Render (–±—É–¥—É—â–µ–µ) |
| **PostgreSQL** | –£–ø–∞–ª–∞ | –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö | –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã, restore –∑–∞ 30 –º–∏–Ω—É—Ç |
| **Redis** | –£–ø–∞–ª | –ù–µ—Ç –∫–µ—à–∞, –º–µ–¥–ª–µ–Ω–Ω–æ | –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:
- ‚úÖ –ò–ù–ù (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á)
- ‚úÖ Email (–¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏)
- ‚ùå –û—Å—Ç–∞–ª—å–Ω–æ–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å—Ç–∞–≤—â–∏–∫ –±–µ–∑ email = –Ω–µ –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å

**–†–µ—à–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ email)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ Telegram - –ø–æ user_id (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ whitelist)
- ‚ö†Ô∏è Web - JWT —Ç–æ–∫–µ–Ω—ã –±–µ–∑ refresh (–Ω–µ—Ç logout)
- ‚ùå API - –Ω–µ—Ç –∑–∞—â–∏—Ç—ã (–±—É–¥—É—â–µ–µ)

#### –î–∞–Ω–Ω—ã–µ
- ‚ö†Ô∏è –ü–∞—Ä–æ–ª–∏ –≤ .env (–Ω–µ –≤ secrets manager)
- ‚ùå –ù–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ë–î
- ‚ùå –ù–µ—Ç rate limiting

#### Email
- ‚ùå –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç email injection
- ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º DKIM/SPF –≤—Ö–æ–¥—è—â–∏—Ö

### –†–∏—Å–∫–∏

1. **Telegram bot token –≤ –∫–æ–¥–µ**
   - –†–∏—Å–∫: –£—Ç–µ—á–∫–∞ –≤ GitHub ‚Üí –¥–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É
   - –†–µ—à–µ–Ω–∏–µ: .env + .gitignore

2. **–ù–µ—Ç CORS –Ω–∞—Å—Ç—Ä–æ–µ–∫**
   - –†–∏—Å–∫: XSS –∞—Ç–∞–∫–∏ –Ω–∞ –≤–µ–±
   - –†–µ—à–µ–Ω–∏–µ: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –≤ FastAPI

3. **SQL injection** (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ)
   - –†–∏—Å–∫: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ raw SQL
   - –†–µ—à–µ–Ω–∏–µ: –¢–æ–ª—å–∫–æ SQLAlchemy ORM

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Bottlenecks

1. **AI –ø–∞—Ä—Å–∏–Ω–≥** - –¥–æ 5 —Å–µ–∫ –Ω–∞ –∑–∞—è–≤–∫—É
2. **IMAP polling** - –¥–æ 30 —Å–µ–∫ –∑–∞–¥–µ—Ä–∂–∫–∞
3. **PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –¥–æ 3 —Å–µ–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç

### –õ–∏–º–∏—Ç—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | MVP –ø—Ä–µ–¥–µ–ª | –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ |
|---------|-----------|----------------|
| –ó–∞—è–≤–æ–∫/–¥–µ–Ω—å | 50 | –ù—É–∂–Ω–∞ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | 5 | –ù—É–∂–Ω–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –†–∞–∑–º–µ—Ä –ë–î | 10 GB | –ù—É–∂–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| Email –≤ –¥–µ–Ω—å | 100 | –ù—É–∂–µ–Ω SendGrid |

## Roadmap —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

### –ù–µ–¥–µ–ª—è 4 (–≤ —Ä–∞–º–∫–∞—Ö MVP)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ AI –ø–∞—Ä—Å–∏–Ω–≥–∞
- [ ] Timeout –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
- [ ] Health check endpoint
- [ ] –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### v1.1 (—á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –ø–æ—Å–ª–µ MVP)
- [ ] Redis –∫–µ—à
- [ ] Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è email
- [ ] Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] Pytest –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

### v2.0 (2-3 –º–µ—Å—è—Ü–∞)
- [ ] Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- [ ] –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞—è–≤–æ–∫
- [ ] Optimistic locking
- [ ] OCR –¥–ª—è PDF/–∫–∞—Ä—Ç–∏–Ω–æ–∫

### v3.0 (–±—É–¥—É—â–µ–µ)
- [ ] –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [ ] –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- [ ] Secrets manager
- [ ] API —Å rate limiting

---

**–í–∞–∂–Ω–æ**: –≠—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è - –Ω–µ –±–∞–≥–∏, –∞ –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–µ trade-offs –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ MVP. –¶–µ–ª—å - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞ –º–µ—Å—è—Ü, –ø–æ—Ç–æ–º –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ —É–ª—É—á—à–∞—Ç—å.
